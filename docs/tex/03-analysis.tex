\chapter{Аналитическая часть}

\section{Анализ существующих решений}

Существует большое количество сайтов, которые предоставляют возможность найти сервера для той или иной онлайн игры. При этом каждый сайт обладает своими преимуществами и недостатками. Далее будут рассмотрены примеры ПО для поиска серверов на российском и зарубежном рынках. Выбранные сайты являются популярными среди пользователей, что говорит о заинтересованности многих людей в поиске серверов для игр.

\subsection{Российский рынок}

Одним из сайтов для поиска серверов для игры <<Minecraft>> \cite{minecraft} является \newline <<MinecaftRating>> \cite{mine-rating}. При этом интерфейс главной страницы представлен на рисунке \ref{img:mine_rus}. На нем предоставляется большое количество функциональностей, таких как:

\begin{itemize}
    \item поиск серверов (с сортировкой по самым популярным, по версии, по количеству игроков);
    \item получение полной информации о каждом сервере;
    \item добавление нового сервера;
    \item для зарегестрированных пользователей --- добавление в избранное.
\end{itemize}

При этом не имеется возможности посмотреть сервера для разных платформ.

Для компьютерной игры <<Counter-Strike>> \cite{cs} также существуют сайты с серверами. 
Примером такого сайта является <<Сервера КС>> \cite{servers-cs}. Интерфейс главной страницы представлен на рисунке \ref{img:cs_rus}. Для данной игры рынок развит слабее, поэтому функциональностей куда меньше. При этом предоставляются следующие возможности:

\begin{itemize}
    \item просмотр серверов (присутсвует лишь список, поиск и сортировка невозможны); 
    \item для зарегестрированных пользователей --- добавление нового сервера, добавление в избранное.
\end{itemize}

Из-за отсутсвия сортировок серверов, имеется возможность купить место в верху таблицы, чтобы пользователи замечали сначала проплаченные сервера. 

\imgs{mine_rus}{h!}{0.3}{Сайт для поиска серверов для игры <<Minecraft>> на русском рынке}
\imgs{cs_rus}{h!}{0.3}{Сайт для поиска серверов для игры <<Counter-Strike>> на русском рынке}
% ~\\~\\~\\~\\~\\~\\~\\~\\~\\

\subsection{Зарубежный рынок}

Примером сайта для поиска серверов для игры <<Minecraft>> \cite{minecraft} является <<Minecraft Servers>> \cite{mine-servs}. На рисунке \ref{img:mine_eng} представлен интерфейс главной страницы.Зарубежный аналог обладает тем же самым функционалом, что и пример сайта с российского рынка. При этом поиск серверов для различных платформ также отсутсвует.

Для игры <<Counter-Strike>> \cite{cs} зарубежный рынок развит сильнее. Так, примером является сайт <<Game Tracker>> \cite{game-tracker}. Интерфейс главной страницы представлен на рисунке \ref{img:cs_eng}. Он обладает тем же самым функционалом, что и его российский аналог, а также:

\begin{itemize}
    \item присутсвует сортировка по различным параметрам;
    \item существует возможность выбора серверов для различных стран мира.
\end{itemize}

При этом возможность покупки приоритетного места в списке отсутсвует. 

\imgs{mine_eng}{h!}{0.3}{Сайт для поиска серверов для игры <<Minecraft>> на зарубежном рынке}
\imgs{cs_eng}{h!}{0.3}{Сайт для поиска серверов для игры <<Counter-Strike>> на зарубежном рынке}



\subsection{Вывод}

В таблице \ref{tbl:compare_realizations} представлены результаты сравнения существующих решений. Выделенные критерии сравнения:

\begin{itemize}
    \item К1 -- просмотр списка серверов;
    \item К2 -- сортировка списка серверов;
    \item К3 -- просмотр серверов для разных платформ;
    \item К4 -- добавление в избранное;
    \item К5 -- получение подробной информации о сервере.
\end{itemize}

\captionsetup{justification=raggedleft,singlelinecheck=off}
\begin{table}[H]
    \centering
	\caption{Сравнение существующих решений}
    \label{tbl:compare_realizations}
	\begin{tabular}{|l|l|l|l|l|l|}
        \hline
        \textbf{Название} & \textbf{К1} & \textbf{К2} & \textbf{К3} & \textbf{К4} & \textbf{К5} \\ \hline

        <<MinecaftRating>>      & + & + & - & + & + \\ \hline
        <<Сервера КС>>          & + & - & - & - & - \\ \hline
        <<Minecraft Servers>>   & + & + & - & + & - \\ \hline
        <<Game Tracker>>        & + & + & - & + & + \\ \hline

    \end{tabular}
\end{table}

Таким образом, российский и зарубженый рынки предоставляют множество различных сайтов для нахождения серверов для игр. Стоит отметить то, что при этом сайты обладают рядом серьезных проблем.

\begin{enumerate}
    \item Отсутсвует возможность просмотреть списки серверов для разных платформ одной и той же игры.
    \item Недостаточная функциональность для поиска необходимых серверов.
    \item Слабая развитость рынка для некоторых игр.
\end{enumerate}


\section{Формализация задачи}

Должно быть разработано веб-приложение для поиска серверов для игры. При этом ПО должно содержать в себе следующие возможности.

\begin{itemize}
    \item \textbf{Список серверов.} Основным процессом является просмотр списка серверов. Список серверов представляет из себя таблицу из всех имеющихся серверов в базе данных. Информационные поля сервера указаны в колонках таблицы, а каждый отдельный сервер --- строка этой таблицы. Также таблица должна иметь возможонсть сортировки по полям сервера (названию, IP-адресу, версии игры, рейтингу сервера) и имени платформы, на которой запущен сервер.

    \item \textbf{Авторизация и регистрация на сайте.} Должна быть введена возможность регистрации пользователя на сайте, чтобы открыть ему дополнительные возможности -- просмотр информации о хостинге сервера, списка игроков сервера и добавления сервера в список избранного.

    \item \textbf{Список избранных серверов.} Каждый зарегестрированный пользователь должен обладать возможность добавить интересующий его сервер в список избранных. Это необходимо для того, чтобы пользователь не потерял интересующий его сервер и всегда имел быстрый доступ к информации о нем.

    \item \textbf{Рейтинг серверов.} Рейтинг сервера формируется из количества добавлений данного сервера в список избранных серверов отдельно взятого пользователя. Данный рейтинг выводится в качестве поля в таблице серверов, предоставляя возможность пользователям узнать наиболее популярный сервер. При этом, если пользователь сайта удалил данный сервер из своего списка избранных серверов, то рейтинг сервера понизится.

    \item \textbf{Фильтрация серверов по платформам.} Каждый сервер может находится лишь на одной единственной платформе. Поэтому важно разделить список серверов на отдельные списки для каждой платформы, чтобы пользователь мог выбрать именно те сервера, которые подходят для его рабочего устройства.

    \item \textbf{Добавление/изменение/удаление серверов администратором.} Данной возможностью наделен лишь администратор сайта. Должен быть предоставлен интерфейс для данного процесса. При добавлении/изменении должны быть добавлены ограничения на ввод информации, чтобы предотвратить ошибки ввода, а также недопустить появления серверов с таким же названием или на том же IP-адресе. При удалении должно быть реализовано подтверждение удаления сервера, чтобы предотвратить случайные нажатия.

    \item \textbf{Изменение ролей пользователей администратором.} Должна быть введена возможность изменения роли зарегестрированного пользователя. При этом администратор не может изменить собственную роль, а также администратору с никнеймом <<admin>> должно быть запрещено изменять роль, чтобы на сайте был всегда, как минимум, один администратор.
\end{itemize}


\section{Описание типов пользовтелей}

В задаче выделено 3 типа пользователей (таблица \ref{tbl:users_types}). 

\captionsetup{justification=raggedleft,singlelinecheck=off}
\begin{table}[H]
    \centering
	\caption{Типы пользователей}
    \label{tbl:users_types}
	\begin{tabular}{|p{5cm}|p{11cm}|}
        \hline
        \textbf{Тип} & \textbf{Функциональность} \\ \hline

        Гость \par (неавторизованный пользователь) &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item Просмотр списка серверов
                    \item Выбор платформы для списка серверов
                    \item Сортировка списка серверов
                    \item Регистрация
                    \item Авторизация
                \end{itemize}
            \end{minipage} 
        \\ \hline

        Авторизованный \par пользователь &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item Добавление сервера в список избранных
                    \item Выбор платформы для списка серверов
                    \item Просмотр списка серверов
                    \item Сортировка списка серверов
                    \item Просмотр информации о хостинге сервера, а также списка игроков сервера
                \end{itemize}
            \end{minipage} 
        \\ \hline

        Администратор &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item Добавление нового сервера на сайт
                    \item Удаление сервера с сайта
                    \item Изменение информации о сервере
                    \item Изменение ролей зарегестрированных пользователей
                    \item Добавление сервера в список избранных
                    \item Просмотр списка серверов
                    \item Выбор платформы для списка серверов
                    \item Сортировка списка серверов
                    \item Просмотр информации о хостинге сервера, а также списка игроков сервера
                \end{itemize}
            \end{minipage} 
        \\ \hline
    \end{tabular}
\end{table}

% \begin{center}
%     \captionsetup{justification=raggedright,singlelinecheck=off}
%     \begin{longtable}[c]{|p{5cm}|p{11cm}|}
%     \caption{Типы пользователей\label{tbl:users_types}}\\ \hline
%         \textbf{Тип} & \textbf{Функциональность} \\ \hline

%         Гость \par (неавторизованный пользователь) &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item Просмотр списка серверов
%                     \item Выбор платформы для списка серверов
%                     \item Сортировка списка серверов по доступным критериям
%                     \item Регистрация
%                     \item Авторизация
%                 \end{itemize}
%             \end{minipage} 
%         \\ \hline

%         Авторизованный \par пользователь &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item Добавление сервера в список избранных серверов
%                     \item Выбор платформы для списка серверов
%                     \item Просмотр списка серверов
%                     \item Сортировка списка серверов по доступным критериям
%                     \item Просмотр информации о хостинге сервера, а также списка игроков сервера
%                 \end{itemize}
%             \end{minipage} 
%         \\ \hline

%         Администратор &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item Добавление нового сервера на сайт
%                     \item Удаление сервера с сайта
%                     \item Изменение информации о сервере
%                     \item Изменение ролей зарегестрированных пользователей
%                     \item Добавление сервера в список избранных серверов
%                     \item Просмотр списка серверов
%                     \item Выбор платформы для списка серверов
%                     \item Сортировка списка серверов по доступным критериям
%                     \item Просмотр информации о хостинге сервера, а также списка игроков сервера
%                 \end{itemize}
%             \end{minipage} 
%         \\ \hline
% \end{longtable}
% \end{center}

На рисунках \ref{img:usecase_guest}-\ref{img:usecase_admin} представлены Use-Case диаграммы выделенных типов пользователей.

\imgs{usecase_guest}{h!}{0.4}{Use-Case диаграмма для неавторизованного пользователя}
\imgs{usecase_user}{h!}{0.4}{Use-Case диаграмма для авторизованного пользователя}
\imgs{usecase_admin}{h!}{0.4}{Use-Case диаграмма для администратора}


\section{Формализация данных}

В соответствии с задачей и типами пользователей, база данных должна содержать следующие модели (таблица \ref{tbl:db_tables}):

\begin{itemize}
    \item сервер;
    \item пользователь;
    \item платформа;
    \item игрок;
    \item хостинг.
\end{itemize}

\captionsetup{justification=raggedleft,singlelinecheck=off}
\begin{table}[H]
    \centering
	\caption{Модели базы данных}
    \label{tbl:db_tables}
	\begin{tabular}{|p{5cm}|p{11cm}|}
        \hline
        \textbf{Тип} & \textbf{Функциональность} \\ \hline
        
        Серевер &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item ID
                    \item Название
                    \item IP-адрес
                    \item Версия игры
                    \item Рейтинг
                    \item ID платформы
                    \item ID хостинга
                \end{itemize}
            \end{minipage}
        \\ \hline

        Платформа &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item ID
                    \item Название
                    \item Популярность
                    \item Стоимость
                \end{itemize}
            \end{minipage}
        \\ \hline

        Хостинг &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item ID
                    \item Название
                    \item Плата в месяц
                \end{itemize}
            \end{minipage}
        \\ \hline

        Игрок &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item ID
                    \item Никнейм
                    \item Сыграно часов на сервере
                    \item Дата последнего захода на сервер
                \end{itemize}
            \end{minipage}
        \\ \hline

        Пользователь &
            \begin{minipage}[t]{\linewidth}
                \begin{itemize}[nosep,after=\strut]
                    \item ID
                    \item Логин
                    \item Пароль
                    \item Роль
                \end{itemize}
            \end{minipage}
        \\ \hline
    \end{tabular}
\end{table}

% \begin{center}
%     \captionsetup{justification=raggedright,singlelinecheck=off}
%     \begin{longtable}[c]{|p{5cm}|p{11cm}|}
%     \caption{Типы пользователей\label{tbl:db_tables}}\\ \hline
%         \textbf{Таблица} & \textbf{Данные} \\ \hline

%         Серевер &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item ID
%                     \item Название
%                     \item IP-адрес
%                     \item Версия игры
%                     \item Рейтинг
%                     \item ID платформы
%                     \item ID хостинга
%                 \end{itemize}
%             \end{minipage}
%         \\ \hline

%         Платформа &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item ID
%                     \item Название
%                     \item Популярность
%                     \item Стоимость
%                 \end{itemize}
%             \end{minipage}
%         \\ \hline

%         Хостинг &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item ID
%                     \item Название
%                     \item Плата в месяц
%                 \end{itemize}
%             \end{minipage}
%         \\ \hline

%         Игрок &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item ID
%                     \item Никнейм
%                     \item Сыграно часов на сервере
%                     \item Дата последнего захода на сервер
%                 \end{itemize}
%             \end{minipage}
%         \\ \hline

%         Пользователь &
%             \begin{minipage}[t]{\linewidth}
%                 \begin{itemize}[nosep,after=\strut]
%                     \item ID
%                     \item Логин
%                     \item Пароль
%                     \item Роль
%                 \end{itemize}
%             \end{minipage}
%         \\ \hline
% \end{longtable}
% \end{center}

Также на рисунке \ref{img:er} предствалена ER-диаграмма \cite{er} разрабатываемой системы в нотации Чена.

\imgs{er}{h!}{0.3}{ER-диаграмма в нотации Чена}





\section{Выбор модели базы данных}

База данных \cite{db-is} --- упорядоченный набор структурированныой информации или данных, которые обычно хранятся в электронном виде в компьютерной системе. База данных обычно управляется системой управления базами данных (СУБД). Данные вместе с СУБД, а также приложения, которые с ними связаны, называются базой данных.

Данные в наиболее распространенных типах современных баз данных обычно хранятся в виде строк и столбцов формирующих таблицу \cite{db-is}. Этими данными можно управлять, изменять, обновлять, контролировать и упорядочивать.

Базы данных делятся на три модели организации данных:

\begin{itemize}
    \item дореляционные;
    \item реляционные;
    \item постреляционные.
\end{itemize}


\subsection{Дореляционные модели}

Дореляционные модели базы данных \cite{pre_sql} предоставляли доступ на уровне записей, которые располагались в виде древовидной структуры со связями предок-потомок. При этом взаимодействие с базой данных происходило с использованием языков программирования, которые были расширены функциями дореляционных СУБД. 

Главными недостатками является то, что оптимизация доступа к данным со стороны системы отсутствует, а также древовидная структура является весьма трудоемкой.


\subsection{Реляционные модели}

Реляционная база данных \cite{db-sql} --- совокупность отношений, которые содержат всю информацию, которая должна храниться в базе данных. Каждое отношение --- двумерная таблица, в каждой строке которой хранится запись об объекте, а в каждом столбце --- свойства данного объекта.

Реляционные базы данных обладают несомненным преимуществом -- благодаря стандартизированного языка запросов SQL \cite{sql}, существует возможность подмены СУБД.


\subsection{Постреляционные модели}

В постреляционных моделях баз данных \cite{db-nosql} не используется табличная схема строк и столбцов. В этих базах данных применяется модель хранения, оптимизированная под конкретные требования типа хранимых данных.

При этом они делятся на следующие основные категории:

\begin{itemize}
    \item коллекции --- документы, упорядоченные по группам;
    \item ключ-значение --- хэш-таблица, в которой по ключу находится значение;
    \item колоночная --- хранит информацию в виде разреженной матрицы, строки и столбцы которой используются как ключи;
    \item графовые --- сетевая база, использующие узлы и ребра для хранения данных.
\end{itemize}

Данные модели используются для спефифических задач, где явно подходит одна из приведенных выше категорий, что явно ускоряет работу программного продукта благодаря грамотной работе с данными.


\subsection{Вывод}

Для поставленной задачи разработки информационной системы Web-приложения поиска серверов для кросплатформенных онлайн игр наилучшим образом подходит реляционная модель хранения данных. Выбор обусловлен необходимостью хранить данные в виде структированных таблиц. Также реляционная модель с помощью стандартезированного языка запросов SQL позволяет подменять системы управления базами данных. Это явялется важным преимуществом, так как в будущем разделе будет произведен выбор СУБД.


\section*{Вывод}

В данном разделе была проанализирована выполняемая задача --- была проведена ее формализация, проведена формализация данных, описаны типы пользователей. Также были расммотрены модели базы данных и выбрана реляционная модель.
